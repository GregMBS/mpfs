<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Memphis Poverty Fact Sheet</title>
    <!-- Font Awesome -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
            href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
            rel="stylesheet"
    />
    <!-- MDB -->
    <link
            href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.css"
            rel="stylesheet"
    />
    <!-- d3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"
            integrity="sha512-M7nHCiNUOwFt6Us3r8alutZLm9qMt4s9951uo8jqO4UwJ1hziseL6O3ndFyigx6+LREfZqnhHxYjKRJ8ZQ69DQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">
        <a class="navbar-brand" href="https://www.gmbs-consulting.com/">GMBS Consulting</a>
        <button
                data-mdb-collapse-init
                class="navbar-toggler"
                type="button"
                data-mdb-target="#navbarNav"
                aria-controls="navbarNav"
                aria-expanded="false"
                aria-label="Toggle navigation"
        >
            <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav"></div>
    </div>
</nav>
<label for="year">Year: </label>
<select id="year" onchange="loadTableData()">
    <option value="2020" selected="selected">2020</option>
    <option value="2021">2021</option>
    <option value="2022">2022</option>
</select>
<table class="table table-striped table-bordered">
    <thead>
    <tr class="table-dark" id="tableHead">
    </tr>
    </thead>
    <tbody id="tableData">
    </tbody>
</table>
<!-- MDB -->
<script
        type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.umd.min.js"
></script>
<script>
    let json = [];
    const years = ['2020', '2021', '2022'];
    function loadTableData() {
        let year = document.getElementById('year');
        const tableHR = document.getElementById("tableHead");
        tableHR.innerHTML = '';
        const tableD = document.getElementById("tableData");
        tableD.innerHTML = '';
        if (json[year.value]) {
            let head = json[year.value][0];
            Object.keys(head).forEach(function (key) {
                tableHR.insertCell().outerHTML = "<th scope='col'>"+key+"</th>";
            })
            json[year.value].forEach(data => {
                let row = tableD.insertRow();
                let i = 0;
                Object.keys(data).forEach(function (key) {
                    let cell = row.insertCell();
                    cell.innerHTML = data[key];
                    if (i === 0) {
                        cell.style.fontWeight = 'bold';
                    }
                    i++;
                })
            })
        }
    }
    function loadData() {
        years.forEach(yv => {
            let url = '../data/summary/' + yv + '.json';
            d3
                .json(url)
                .then(function (data) {
                    json[yv] = data;
                    loadTableData();
                });
        })
    }

    loadData();
</script>
<script
        type="text/javascript"
        src="../js/navbar.js"
></script>
<script>
    document.getElementById('link-st').classList.add("active");
</script>
</body>
</html>